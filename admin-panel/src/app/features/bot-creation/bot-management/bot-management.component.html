<div class="bot-management-container">
  <div class="header">
    <h1>ü§ñ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º</h1>
    <p class="subtitle">–°–æ–∑–¥–∞–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram –±–æ—Ç–∞ –¥–ª—è –≤–∞—à–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</p>
  </div>

  <div class="content">
    <!-- –ì–∞–π–¥ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞ -->
    <div *ngIf="showPostCreationGuide" class="post-creation-guide">
      <app-post-bot-creation-guide
        [organizationId]="organizationId"
        [botUsername]="activatedBotUsername"
        (guideCompleted)="onPostCreationGuideCompleted()"
        (skipGuide)="onPostCreationGuideSkipped()">
      </app-post-bot-creation-guide>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–º -->
    <mat-tab-group 
      *ngIf="!showPostCreationGuide"
      [(selectedIndex)]="selectedTabIndex" 
      class="bot-tabs">
      
      <!-- –í–∫–ª–∞–¥–∫–∞ 1: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é -->
      <mat-tab [disabled]="!isTabEnabled(0)">
        <ng-template mat-tab-label>
          <div class="tab-label" [ngClass]="getTabStatus(0)">
            <mat-icon>{{ getTabIcon(0) }}</mat-icon>
            <span>{{ getTabTitle(0) }}</span>
            <mat-icon *ngIf="getTabStatus(0) === 'completed'" class="status-icon">check_circle</mat-icon>
          </div>
        </ng-template>
        
        <div class="tab-content">
          <app-bot-creation-guide></app-bot-creation-guide>
          
          <div class="tab-navigation">
            <button 
              mat-raised-button 
              color="primary" 
              (click)="goToNextStep()"
              class="next-button">
              –ü–µ—Ä–µ–π—Ç–∏ –∫ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
        </div>
      </mat-tab>

      <!-- –í–∫–ª–∞–¥–∫–∞ 2: –ê–∫—Ç–∏–≤–∞—Ü–∏—è –±–æ—Ç–∞ -->
      <mat-tab [disabled]="!isTabEnabled(1)">
        <ng-template mat-tab-label>
          <div class="tab-label" [ngClass]="getTabStatus(1)">
            <mat-icon>{{ getTabIcon(1) }}</mat-icon>
            <span>{{ getTabTitle(1) }}</span>
            <mat-icon *ngIf="getTabStatus(1) === 'completed'" class="status-icon">check_circle</mat-icon>
          </div>
        </ng-template>
        
        <div class="tab-content">
          <app-bot-token-input 
            [organizationId]="organizationId"
            (botActivated)="onBotActivated($event)">
          </app-bot-token-input>
          
          <div class="tab-navigation">
            <button 
              mat-stroked-button 
              (click)="goToPreviousStep()"
              class="back-button">
              <mat-icon>arrow_back</mat-icon>
              –ù–∞–∑–∞–¥ –∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
            </button>
            
            <button 
              mat-raised-button 
              color="primary" 
              (click)="goToNextStep()"
              [disabled]="!botActivated"
              class="next-button">
              –ü–µ—Ä–µ–π—Ç–∏ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
        </div>
      </mat-tab>

      <!-- –í–∫–ª–∞–¥–∫–∞ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ -->
      <mat-tab [disabled]="!isTabEnabled(2)">
        <ng-template mat-tab-label>
          <div class="tab-label" [ngClass]="getTabStatus(2)">
            <mat-icon>{{ getTabIcon(2) }}</mat-icon>
            <span>{{ getTabTitle(2) }}</span>
            <mat-icon *ngIf="getTabStatus(2) === 'completed'" class="status-icon">check_circle</mat-icon>
          </div>
        </ng-template>
        
        <div class="tab-content">
          <app-bot-settings 
            [organizationId]="organizationId"
            (settingsUpdated)="onSettingsUpdated()">
          </app-bot-settings>
          
          <div class="tab-navigation">
            <button 
              mat-stroked-button 
              (click)="goToPreviousStep()"
              class="back-button">
              <mat-icon>arrow_back</mat-icon>
              –ù–∞–∑–∞–¥ –∫ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
            </button>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>

  <!-- –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞ -->
  <div class="bot-status" *ngIf="botActivated">
    <mat-card class="status-card success">
      <mat-card-content>
        <div class="status-content">
          <mat-icon>check_circle</mat-icon>
          <div class="status-text">
            <h3>–ë–æ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!</h3>
            <p>–í–∞—à Telegram –±–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ. –ö–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞.</p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
