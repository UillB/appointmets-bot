<div class="post-bot-guide-container">
  <div class="guide-header">
    <h1>{{ getStepTitle() }}</h1>
    <p class="subtitle">{{ getStepDescription() }}</p>
  </div>

  <div class="guide-content">
    <mat-stepper 
      [linear]="false" 
      [selectedIndex]="currentStep"
      class="main-stepper">
      
      <!-- –®–∞–≥ 1: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ -->
      <mat-step [completed]="currentStep > PostBotCreationStep.WELCOME">
        <ng-template matStepLabel>
          <div class="step-label">
            <mat-icon>celebration</mat-icon>
            <span>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</span>
            <mat-icon *ngIf="currentStep > PostBotCreationStep.WELCOME" class="completed-icon">check_circle</mat-icon>
          </div>
        </ng-template>

        <div class="step-content" *ngIf="currentStep === PostBotCreationStep.WELCOME">
          <mat-card class="welcome-card">
            <mat-card-content>
              <div class="welcome-content">
                <div class="bot-info">
                  <mat-icon class="bot-icon">smart_toy</mat-icon>
                  <h3>–í–∞—à –±–æ—Ç @{{ botUsername }} –≥–æ—Ç–æ–≤!</h3>
                  <p>–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —É—Å–ª—É–≥–∏ –∏ —Å–ª–æ—Ç—ã –¥–ª—è –∑–∞–ø–∏—Å–∏</p>
                </div>

                <div class="next-steps">
                  <h4>–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:</h4>
                  <div class="step-item">
                    <mat-icon class="step-icon">business_center</mat-icon>
                    <div class="step-text">
                      <strong>–°–æ–∑–¥–∞—Ç—å —É—Å–ª—É–≥–∏</strong>
                      <p>–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –∫–∞–∫–∏–µ —É—Å–ª—É–≥–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–∞—à–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</p>
                    </div>
                  </div>
                  <div class="step-item">
                    <mat-icon class="step-icon">schedule</mat-icon>
                    <div class="step-text">
                      <strong>–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–ª–æ—Ç—ã</strong>
                      <p>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞</p>
                    </div>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </mat-step>

      <!-- –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª—É–≥ -->
      <mat-step [completed]="serviceCreated">
        <ng-template matStepLabel>
          <div class="step-label">
            <mat-icon>business_center</mat-icon>
            <span>–°–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª—É–≥</span>
            <mat-icon *ngIf="serviceCreated" class="completed-icon">check_circle</mat-icon>
          </div>
        </ng-template>

        <div class="step-content" *ngIf="currentStep === PostBotCreationStep.CREATE_SERVICE">
          <app-service-creation-guide
            [organizationId]="organizationId"
            (serviceCreated)="onServiceCreated()"
            (skipGuide)="onServiceGuideSkipped()">
          </app-service-creation-guide>
        </div>
      </mat-step>

      <!-- –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ—Ç–æ–≤ -->
      <mat-step [completed]="slotsCreated">
        <ng-template matStepLabel>
          <div class="step-label">
            <mat-icon>schedule</mat-icon>
            <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ª–æ—Ç–æ–≤</span>
            <mat-icon *ngIf="slotsCreated" class="completed-icon">check_circle</mat-icon>
          </div>
        </ng-template>

        <div class="step-content" *ngIf="currentStep === PostBotCreationStep.CREATE_SLOTS">
          <app-slots-creation-guide
            [organizationId]="organizationId"
            (slotsCreated)="onSlotsCreated()"
            (skipGuide)="onSlotsGuideSkipped()">
          </app-slots-creation-guide>
        </div>
      </mat-step>

      <!-- –®–∞–≥ 4: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ -->
      <mat-step [completed]="false">
        <ng-template matStepLabel>
          <div class="step-label">
            <mat-icon>check_circle</mat-icon>
            <span>–ì–æ—Ç–æ–≤–æ!</span>
          </div>
        </ng-template>

        <div class="step-content" *ngIf="currentStep === PostBotCreationStep.COMPLETE">
          <mat-card class="completion-card">
            <mat-card-content>
              <div class="completion-content">
                <div class="success-icon">
                  <mat-icon>check_circle</mat-icon>
                </div>
                <h3>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h3>
                <p>–í–∞—à –±–æ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</p>
                
                <div class="bot-links">
                  <a [href]="'https://t.me/' + botUsername" target="_blank" class="bot-link">
                    <mat-icon>open_in_new</mat-icon>
                    –û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –≤ Telegram
                  </a>
                </div>

                <div class="completion-actions">
                  <button 
                    mat-raised-button 
                    color="primary"
                    (click)="completeGuide()"
                    class="complete-button">
                    <mat-icon>done</mat-icon>
                    –ó–∞–≤–µ—Ä—à–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É
                  </button>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </mat-step>
    </mat-stepper>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="guide-navigation" *ngIf="currentStep !== PostBotCreationStep.COMPLETE">
      <div class="navigation-buttons">
        <button 
          mat-stroked-button 
          (click)="previousStep()"
          [disabled]="isFirstStep()"
          class="nav-button">
          <mat-icon>arrow_back</mat-icon>
          –ù–∞–∑–∞–¥
        </button>

        <button 
          mat-raised-button 
          color="primary"
          (click)="nextStep()"
          [disabled]="currentStep === PostBotCreationStep.CREATE_SERVICE && !serviceCreated"
          class="nav-button">
          –î–∞–ª–µ–µ
          <mat-icon>arrow_forward</mat-icon>
        </button>
      </div>

      <div class="skip-section">
        <p class="skip-text">–•–æ—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–∑–∂–µ?</p>
        <button 
          mat-button 
          color="accent"
          (click)="skipEntireGuide()"
          class="skip-button">
          <mat-icon>skip_next</mat-icon>
          –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É
        </button>
      </div>
    </div>
  </div>
</div>
