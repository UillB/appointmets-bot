# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø FRONTEND AI CONFIGURATION

## üìÖ –î–∞—Ç–∞: 19 –æ–∫—Ç—è–±—Ä—è 2025

## ‚ùå –ü–†–û–ë–õ–ï–ú–´, –ö–û–¢–û–†–´–ï –ë–´–õ–ò –ò–°–ü–†–ê–í–õ–ï–ù–´

### 1. **TypeError: Cannot read properties of undefined (reading 'keys')**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∞ –≤ template –Ω–∞ —Å—Ç—Ä–æ–∫–µ 161 –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ `usageStats.averageTokensPerRequest`
- **–ü—Ä–∏—á–∏–Ω–∞**: `usageStats` –º–æ–≥ –±—ã—Ç—å `undefined` –∏–ª–∏ `null`
- **–†–µ—à–µ–Ω–∏–µ**: 
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ `usageStats?.` –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö
  - –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `formatTokens()` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ `undefined`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ template

### 2. **–ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–µ–º–Ω–æ–π —Ç–µ–º–æ–π**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –§–æ—Ä–º–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∞—Å—å –≤ —Ç–µ–º–Ω–æ–π —Ç–µ–º–µ, —Ö–æ—Ç—è –≤–∫–ª—é—á–µ–Ω–∞ —Å–≤–µ—Ç–ª–∞—è
- **–ü—Ä–∏—á–∏–Ω–∞**: CSS –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å `@media (prefers-color-scheme: dark)` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–ª —Ç–µ–º–Ω—É—é —Ç–µ–º—É
- **–†–µ—à–µ–Ω–∏–µ**: 
  - –û—Ç–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å –¥–ª—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ —Å `!important`
  - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í –ö–û–î–ï

### 1. **ai-config.component.html**
```html
<!-- –ë–´–õ–û -->
<div class="stat-value">{{ (usageStats.averageTokensPerRequest || 0) | number:'1.0-0' }}</div>

<!-- –°–¢–ê–õ–û -->
<div class="stat-value">{{ (usageStats?.averageTokensPerRequest || 0) | number:'1.0-0' }}</div>
```

### 2. **ai-config.component.ts**
```typescript
// –ë–´–õ–û
formatTokens(tokens: number): string {

// –°–¢–ê–õ–û
formatTokens(tokens: number | undefined): string {
  if (!tokens || tokens === 0) {
    return '0';
  }
  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
}
```

### 3. **ai-config.component.scss**
```scss
// –ë–´–õ–û
@media (prefers-color-scheme: dark) {
  .config-card {
    background: #424242;
    // ... —Ç–µ–º–Ω—ã–µ —Ü–≤–µ—Ç–∞
  }
}

// –°–¢–ê–õ–û
// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞
.config-card {
  background: #ffffff !important;
  color: #333333 !important;
  
  mat-card-title {
    color: #1976d2 !important;
  }
  // ... —Å–≤–µ—Ç–ª—ã–µ —Ü–≤–µ—Ç–∞
}
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### ‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- Backend API —Ä–∞–±–æ—Ç–∞–µ—Ç: `http://localhost:4000/api/health` ‚úÖ
- Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç: `http://localhost:4200` ‚úÖ
- AI Config API —Ä–∞–±–æ—Ç–∞–µ—Ç: `/api/ai-config/2/stats` ‚úÖ
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚úÖ
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞ ‚úÖ

### üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
```json
{
  "totalRequests": 0,
  "totalTokens": 0,
  "averageTokensPerRequest": 0,
  "requestsByScenario": {}
}
```

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

### ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
1. **TypeError –∏—Å–ø—Ä–∞–≤–ª–µ–Ω** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `undefined`
2. **–¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞** - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞
3. **–í—Å–µ –æ—à–∏–±–∫–∏ –ª–∏–Ω—Ç–µ—Ä–∞ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã**
4. **API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**

### üöÄ **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞:**
- Frontend AI Configuration —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `undefined` –¥–æ–±–∞–≤–ª–µ–Ω—ã
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**FRONTEND AI CONFIGURATION –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù!** ‚úÖ
